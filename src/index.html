<!doctype html>
<html>
    <head>
        <title>draw.3d</title>
        <style>
            .garden {
                position: absolute;
                top: 0px;
                bottom: 0px;
                right: 0px;
                left: 0px;
                border: black solid 1px;
            }

            .ball {
                position: absolute;
                top   : 90px;
                left  : 90px;
                width : 20px;
                height: 20px;
                background: green;
                border-radius: 100%;
            }
        </style>
    </head>

    <body>
        <div class="garden">
            <div class="ball"></div>
          </div>
          
          <pre class="output"></pre>

          <script>
            
                var ball   = document.querySelector('.ball');
                var garden = document.querySelector('.garden');
                var output = document.querySelector('.output');

                var maxX = garden.clientWidth  - ball.clientWidth;
                var maxY = garden.clientHeight - ball.clientHeight;

                function handleOrientation(event) {
                    var absolute = event.absolute;
                    var alpha = event.alpha;
                    var beta = event.beta;  // In degree in the range [-180,180]
                    var gamma = event.gamma; // In degree in the range [-90,90]

                    output.innerHTML  = "absolute: " + absolute + "\n";
                    output.innerHTML += "alpha: " + alpha + "\n";
                    output.innerHTML += "beta: " + beta + "\n";
                    output.innerHTML += "gamma: " + gamma + "\n";

                    // Because we don't want to have the device upside down
                    // We constrain the x value to the range [-90,90]
                    if (beta >  90) { beta =  90};
                    if (gamma < -90) { gamma = -90};

                    // To make computation easier we shift the range of
                    // x and y to [0,180]
                    beta += 90;
                    gamma += 90;

                    // 10 is half the size of the ball
                    // It center the positioning point to the center of the ball
                    ball.style.top  = (maxX*beta/180) + "px";
                    ball.style.left = (maxY*gamma/180) + "px";
                }

                window.addEventListener('deviceorientation', handleOrientation);
        </script>
    </body>
</html>
